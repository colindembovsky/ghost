<?xml version="1.0" encoding="utf-8"?>
<post>
  <id>2fc67b76-82b9-4f5b-a296-4e3673c4fb45</id>
  <title>Fix: Release Management WebDeploy Deployment Fails: Access Denied</title>
  <slug>fix-release-management-webdeploy-deployment-fails-access-denied</slug>
  <shortUrl>http://bit.ly/1mZoW8f</shortUrl>
  <author>Colin Dembovsky</author>
  <pubDate>2014-02-07 10:17:00</pubDate>
  <lastModified>2020-04-04 12:31:02</lastModified>
  <content>&lt;p&gt;If you’re using WebDeploy and Release Management (&lt;a href="http://www.colinsalmcorner.com/2013/11/webdeploy-and-release-management.html" target="_blank"&gt;as you should&lt;/a&gt; to release Web Applications) you may hit the following error:  &lt;p&gt;&lt;font size="2" face="Courier New"&gt;Info: Adding sitemanifest (sitemanifest).&lt;br&gt;Info: Creating application (Default Web Site/MyWebsite)&lt;br&gt;Error: An error occurred when reading the IIS Configuration File 'MACHINE/REDIRECTION'. The identity performing the operation was 'DOMAIN\tfsservice'.&lt;br&gt;Error: Filename: \\?\C:\Windows\system32\inetsrv\config\redirection.config&lt;br&gt;Error: Cannot read configuration file due to insufficient permissions&lt;/font&gt;  &lt;p&gt;Seems that the WebDeploy command can’t access some files in c:\Windows\system32\inetsrv. It may be the irmsdeploy.exe MSDeploy wrapper that I’m using for doing WebDeploy in Release Management (see my &lt;a href="http://www.colinsalmcorner.com/2013/11/webdeploy-and-release-management.html" target="_blank"&gt;post about how to do this&lt;/a&gt;), since logging into the machine and running the webdeploy.cmd file manually works just fine. &lt;p&gt;  &lt;h2&gt;The Resolution&lt;/h2&gt; &lt;p&gt;You have to add permissions for the release management agent identity to the folder, but this is a folder who’s owner identity is TrustedInstaller – meaning you have to change the owner to yourself first. &lt;/p&gt; &lt;ul&gt; &lt;li&gt;Right click the insetsrv folder in c:\windows\system32 and select Properties.&lt;/li&gt; &lt;li&gt;Click on the Security tab and click the “Advanced” button:&lt;/li&gt;&lt;/ul&gt; &lt;p&gt;&lt;a href="http://lh6.ggpht.com/-SXLi5YiFJJ8/UvSWgtofeyI/AAAAAAAABOo/m7-YRNPhdvg/s1600-h/image%25255B2%25255D.png"&gt;&lt;img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; float: none; margin-left: auto; border-left: 0px; display: block; margin-right: auto" border="0" alt="image" src="http://lh3.ggpht.com/-SMFFZcKdfi0/UvSWhMDKxUI/AAAAAAAABOw/d86F02LLIaE/image_thumb.png?imgmax=800" width="185" height="244"&gt;&lt;/a&gt; &lt;/p&gt;  &lt;ul&gt; &lt;li&gt;Click on the owner tab and then on the Edit button:&lt;/li&gt;&lt;/ul&gt; &lt;p&gt;&lt;a href="http://lh5.ggpht.com/-hx6-XXpFqHI/UvSWhj12lvI/AAAAAAAABO4/eIvZ_GGn0BU/s1600-h/image%25255B5%25255D.png"&gt;&lt;img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; float: none; margin-left: auto; border-left: 0px; display: block; margin-right: auto" border="0" alt="image" src="http://lh6.ggpht.com/-QNJhFwsmd9M/UvSWiNpdQdI/AAAAAAAABPA/X--C0nBBLEo/image_thumb%25255B1%25255D.png?imgmax=800" width="244" height="184"&gt;&lt;/a&gt; &lt;/p&gt; &lt;ul&gt; &lt;li&gt;Select yourself (I logged in as TfsSetup which is in the local admin group on this machine), check “Replace owner on subcontainers and objects” checkbox and click “OK”:&lt;/li&gt;&lt;/ul&gt; &lt;p&gt;&lt;a href="http://lh6.ggpht.com/-2LshUZF4El4/UvSWi59mevI/AAAAAAAABPI/pZdmwSbM9TU/s1600-h/image%25255B8%25255D.png"&gt;&lt;img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; float: none; margin-left: auto; border-left: 0px; display: block; margin-right: auto" border="0" alt="image" src="http://lh6.ggpht.com/-XrHxyKXxteU/UvSWjSVE48I/AAAAAAAABPQ/phXqt3yXlV4/image_thumb%25255B2%25255D.png?imgmax=800" width="244" height="185"&gt;&lt;/a&gt; &lt;/p&gt; &lt;ul&gt; &lt;li&gt;Close all the dialogs and then right-click the inetsrv folder again and click Properties. Now you can allow read access to the Release Management agent identity to this folder.&lt;/li&gt;&lt;/ul&gt; &lt;p&gt;Once you’ve changed the permissions, you will need to reboot the machine. After the reboot, the WebDeploy through Release Management should work without a hitch.&lt;/p&gt; &lt;p&gt;Happy releasing!&lt;/p&gt;  </content>
  <ispublished>true</ispublished>
  <categories>
    <category>Release Management</category>
  </categories>
  <comments></comments>
  <viewCount>47905</viewCount>
</post>