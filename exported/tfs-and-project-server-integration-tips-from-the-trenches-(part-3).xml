<?xml version="1.0" encoding="utf-8"?>
<post>
  <id>7a86a013-7ebc-4486-a36f-72ef87e858d0</id>
  <title>TFS and Project Server Integration: Tips from the Trenches (Part 3)</title>
  <slug>tfs-and-project-server-integration-tips-from-the-trenches-(part-3)</slug>
  <shortUrl>http://bit.ly/1fxXeNt</shortUrl>
  <author>Colin Dembovsky</author>
  <pubDate>2011-07-07 13:15:00</pubDate>
  <lastModified>2020-03-29 05:02:03</lastModified>
  <content>&lt;h2&gt;Links to this series:&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;&lt;a href="http://colinsalmcorner.blogspot.com/2011/07/tfs-and-project-server-integration-tips.html"&gt;Part 1 – Considerations&lt;/a&gt;  &lt;li&gt;&lt;a href="http://colinsalmcorner.blogspot.com/2011/07/tfs-and-project-server-integration-tips_07.html"&gt;Part 2 – Setup&lt;/a&gt; &lt;li&gt;&lt;a href="http://colinsalmcorner.blogspot.com/2011/07/tfs-and-project-server-integration-tips_6118.html"&gt;Part 4 – Synchronizing Hierarchies from TFS&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt; &lt;h2&gt;Part 3: Configuring the Bits&lt;/h2&gt; &lt;p&gt;Now that you’ve installed the Integrator, you need to configure it. This happens at various levels:&lt;/p&gt; &lt;ol&gt; &lt;li&gt;Register the PWA with TFS  &lt;li&gt;Associate a Project Collection with a registered PWA  &lt;li&gt;Specify mappings (or use the default mapping)  &lt;li&gt;Associate a Team Project with one (or more) Enterprise Projects  &lt;li&gt;Mark Tasks for synchronization&lt;/li&gt;&lt;/ol&gt; &lt;p&gt;You only need to configure the Project Collection &lt;-&gt; PWA once – but for each Team Project that you want to map to an Enterprise Project, you’ll need to configure a mapping (again, usually just once).&lt;/p&gt; &lt;p&gt;I logged into a client machine with VS 2010 SP1 installed (that’s where tfsadmin.exe comes from) as TFSSetup (my admin account for the integration).&lt;/p&gt; &lt;h2&gt;Registering a PWA&lt;/h2&gt; &lt;p&gt;To register a PWA, open a VS command prompt and use the following command:&lt;/p&gt; &lt;p&gt;&lt;font face="Courier New"&gt;tfsadmin ProjectServer /RegisterPWA /pwa:&lt;strong&gt;pwaUrl&lt;/strong&gt; /tfs:&lt;strong&gt;tfsUrl&lt;/strong&gt;&lt;/font&gt;&lt;/p&gt; &lt;p&gt;where &lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;strong&gt;pwaUrl&lt;/strong&gt; is the url to your PWA – like &lt;a href="http://server/pwa"&gt;http://server/pwa&lt;/a&gt;  &lt;li&gt;&lt;strong&gt;tfsUrl&lt;/strong&gt; is the url to your TFS services – like &lt;a href="http://server:8080/tfs"&gt;http://server:8080/tfs&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt; &lt;h2&gt;TF244079 when trying RegisterPWA&lt;/h2&gt; &lt;p&gt;If you get the following (helpful!) error:&lt;/p&gt; &lt;p&gt;&lt;font face="Courier New"&gt;TF244079: An error occurred while retrieving the URL for shared services&lt;/font&gt;&lt;/p&gt; &lt;p&gt;then you probably haven’t installed the latest cumulative updates for Project Server (&lt;a href="http://blogs.msdn.com/b/project/archive/2011/05/16/project-2010-sp1.aspx"&gt;Project 2010 SP1&lt;/a&gt; is also available – if you install SP1, make sure you run the Sharepoint Configuration Wizard after installing the SP).&lt;/p&gt; &lt;h2&gt;Associate a Project Collection to a Registered PWA&lt;/h2&gt; &lt;p&gt;To map a Project Collection to a PWA, open a VS command prompt and use the following command:&lt;/p&gt; &lt;p&gt;&lt;font face="Courier New"&gt;tfsadmin ProjectServer /MapPWAToCollection /pwa:&lt;strong&gt;pwaUrl&lt;/strong&gt; /collection:&lt;strong&gt;tpcUrl&lt;/strong&gt;&lt;/font&gt;&lt;/p&gt; &lt;p&gt;where &lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;strong&gt;pwaUrl&lt;/strong&gt; is the url to your PWA – like &lt;a href="http://server/pwa"&gt;http://server/pwa&lt;/a&gt;  &lt;li&gt;&lt;strong&gt;tpcUrl&lt;/strong&gt; is the url to the Project collection – like &lt;a href="http://server:8080/tfs/DefaultCollection"&gt;http://server:8080/tfs/DefaultCollection&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt; &lt;h2&gt;Specifying Mappings&lt;/h2&gt; &lt;p&gt;You can customize the mappings yourself if you want to deviate from the default mapping – consult the help file if you want to do this. For this example, I used the default mapping.&lt;/p&gt; &lt;p&gt;To specify the default mapping, use the following command:&lt;/p&gt; &lt;p&gt;&lt;font face="Courier New"&gt;tfsadmin ProjectServer /UploadFieldMapping /collection:&lt;strong&gt;tpcUrl &lt;/strong&gt;/useDefaultFieldMappings&lt;/font&gt;&lt;/p&gt; &lt;p&gt;where &lt;strong&gt;tpcUrl&lt;/strong&gt; is the url to the Project collection – like &lt;a href="http://server:8080/tfs/DefaultCollection"&gt;http://server:8080/tfs/DefaultCollection&lt;/a&gt;&lt;/p&gt; &lt;h2&gt;Mapping a Team Project to an Enterprise Project&lt;/h2&gt; &lt;p&gt;Now you can map a Team Project to an Enterprise Project. Use the following command:&lt;/p&gt; &lt;p&gt;&lt;font face="Courier New"&gt;tfsadmin ProjectServer /MapPlanToTeamProject /collection:&lt;strong&gt;tpcUrl&lt;/strong&gt; /enterpriseProject:&lt;strong&gt;epmProjectName&lt;/strong&gt; /teamProject:&lt;strong&gt;teamProjectName&lt;/strong&gt; /workItemTypes:&lt;strong&gt;typeList&lt;/strong&gt; &lt;strong&gt;/nofixedwork&lt;/strong&gt;&lt;/font&gt;&lt;/p&gt; &lt;p&gt;where &lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;strong&gt;tpcUrl&lt;/strong&gt; is the url to the Project collection – like &lt;a href="http://server:8080/tfs/DefaultCollection"&gt;http://server:8080/tfs/DefaultCollection&lt;/a&gt;  &lt;li&gt;&lt;strong&gt;epmProjectName&lt;/strong&gt; is the name of the Project Plan on Project Server (use “” to enclose the name if it contains spaces)  &lt;li&gt;&lt;strong&gt;teamProjectName&lt;/strong&gt; is the name of the Team Project in TFS (use “” to enclose the name if it contains spaces)  &lt;li&gt;&lt;strong&gt;typeList&lt;/strong&gt; is the list of types you want to sync – if you specify multiple types, use “” to enclose the comma-separated list without spaces after the commas (for example, “Requirement,Task” or “User Story,Task”)  &lt;li&gt;&lt;strong&gt;nofixedwork&lt;/strong&gt; specifies no fixed work in Project (consult the Integration help file for more info on this switch).&lt;/li&gt;&lt;/ul&gt; &lt;p&gt;In the next post, we’ll look at how to synchronize work items.&lt;/p&gt;  </content>
  <ispublished>true</ispublished>
  <categories>
    <category>ALM</category>
  </categories>
  <comments></comments>
  <viewCount>2127</viewCount>
</post>